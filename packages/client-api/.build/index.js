"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e){var r,n;this.body=void 0,this.headers=void 0,this.method=void 0,this.url=void 0,this.url=t,this.body=null!=(r=null==e?void 0:e.body)?r:Buffer.alloc(0),this.headers=new s(null==e?void 0:e.headers),this.method=null!=(n=null==e?void 0:e.method)?n:"GET"}text(){return this.body.toString("utf8")}json(){return JSON.parse(this.text())}}class e{constructor(t,e){var r,n,o;this.body=void 0,this.headers=void 0,this.status=void 0,this.statusText=void 0,this.redirected=void 0,this.ok=void 0;const i=parseInt(null!=(r=null==e||null==(n=e.status)?void 0:n.toString())?r:"200",10);if(i<200||i>599)throw new TypeError("The status provided (0) is outside the range [200, 599].");if(204===i&&(null!==t||void 0!==t))throw new TypeError("The 204 status code does not allow a body.");this.body=null!=t?t:null,this.status=i,this.statusText=null!=(o=null==e?void 0:e.statusText)?o:"",this.redirected=301===i||302===i||303===i||307===i||308===i,this.ok=i>=200&&i<300,this.headers=new s(null==e?void 0:e.headers)}}class s{constructor(t){this.headers=new Map,t instanceof s?t.forEach((([t,e])=>{this.set(t,e)})):t&&Object.entries(t).forEach((([t,e])=>{this.set(t,e)}))}append(t,e){var s;const r=null!=(s=this.headers.get(t))?s:[];r.push(String(e)),this.headers.set(t,r)}delete(t){this.headers.delete(t)}entries(){return this.headers.entries()}forEach(t){this.headers.forEach(((e,s)=>t(String(e),s)))}get(t){const e=this.headers.get(t);return e?e.join(", "):void 0}has(t){return this.headers.has(t)}keys(){return this.headers.keys()}set(t,e){this.headers.set(t,[String(e)])}values(){return new Set(Array.from(this.headers.values()).map((t=>t.join(", ")))).entries()}}function r(t){var e,s;const r={};return t.headers.forEach((([t,e])=>{r[t.toLocaleLowerCase()]=[{key:t,value:e}]})),{status:String(t.status),statusDescription:null!=(e=t.statusText)?e:"",headers:r,body:null!=(s=t.body)?s:""}}exports.handler=n=>async function(n,o){try{var i,a,h;const o=null==(i=n.Records)||null==(a=i[0].cf)?void 0:a.request;if(!o)throw new e("",{status:422});const d=null!=(h=await(t=>new e(JSON.stringify(t),{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}}))(function(r){if(r.body.inputTruncated)throw new e("Request body too large, limit 40KB",{status:413});const n=Buffer.from(r.body.data,r.body.encoding),o=new s;return Object.entries(r.headers).forEach((([,t])=>{t.forEach((({key:t,value:e})=>o.append(t,e)))})),new t(r.uri,{headers:o,body:n,method:r.method})}(o)))?h:new e(null,{status:204});if(d instanceof e)return r(d);throw new TypeError("The callback must return a Response.")}catch(t){if(t instanceof e)return r(t);{const s=t instanceof Error?t.message:String(t);return r(new e(s,{status:500}))}}}(n);
//# sourceMappingURL=client-api.cjs.production.min.js.map

{"version":3,"sources":["src/dev/index.ts"],"sourcesContent":["import { Command, Option } from \"commander\";\nimport devServer from \"./devServer\";\nimport pushMessage from \"./pushMessage\";\n\nconst command = new Command(\"dev\");\nexport default command;\n\nconst port = new Option(\"-p, --port <port>\", \"Port to run the server on\")\n  .env(\"PORT\")\n  .default(8001)\n  .makeOptionMandatory();\n\ncommand\n  .command(\"start\", { isDefault: true })\n  .description(\"Start the development server (default command)\")\n  .addOption(port)\n  .action(devServer);\n\ncommand\n  .command(\"queue\")\n  .description(\"Push message to the named queue (dev server)\")\n  .argument(\"<queueName>\", \"The queue name\")\n  .argument(\n    \"<message>\",\n    'The message; use @name to read from a file, or \"-\" to read from stdin'\n  )\n  .addOption(port)\n  .option(\"-g --group <group>\", \"Group ID (FIFO queues only)\")\n  .action(pushMessage);\n\ncommand\n  .command(\"schedule\", { hidden: true })\n  .description(\"Run a scheduled job (dev server)\")\n  .argument(\"<jobName>\", \"The scheduled job name\")\n  .addOption(port)\n  .action(async (jobName, options) => {\n    console.log(\"run job\", jobName, options);\n  });\n"],"names":["command","port","env","default","makeOptionMandatory","isDefault","description","addOption","action","argument","option","hidden","jobName","options","console","log"],"mappings":";;;;;AAAgC,GAAW,CAAX,UAAW;AACrB,GAAa,CAAb,UAAa;AACX,GAAe,CAAf,YAAe;AAEvC,KAAK,CAACA,OAAO,GAAG,GAAG,CAJa,UAAW,SAIf,CAAK;eAClBA,OAAO;;AAEtB,KAAK,CAACC,IAAI,GAAG,GAAG,CAPgB,UAAW,QAOnB,CAAmB,oBAAE,CAA2B,4BACrEC,GAAG,CAAC,CAAM,OACVC,OAAO,CAAC,IAAI,EACZC,mBAAmB;AAEtBJ,OAAO,CACJA,OAAO,CAAC,CAAO,QAAE,CAAC;IAACK,SAAS,EAAE,IAAI;AAAC,CAAC,EACpCC,WAAW,CAAC,CAAgD,iDAC5DC,SAAS,CAACN,IAAI,EACdO,MAAM,CAfa,UAAa;AAiBnCR,OAAO,CACJA,OAAO,CAAC,CAAO,QACfM,WAAW,CAAC,CAA8C,+CAC1DG,QAAQ,CAAC,CAAa,cAAE,CAAgB,iBACxCA,QAAQ,CACP,CAAW,YACX,CAAuE,wEAExEF,SAAS,CAACN,IAAI,EACdS,MAAM,CAAC,CAAoB,qBAAE,CAA6B,8BAC1DF,MAAM,CA1Be,YAAe;AA4BvCR,OAAO,CACJA,OAAO,CAAC,CAAU,WAAE,CAAC;IAACW,MAAM,EAAE,IAAI;AAAC,CAAC,EACpCL,WAAW,CAAC,CAAkC,mCAC9CG,QAAQ,CAAC,CAAW,YAAE,CAAwB,yBAC9CF,SAAS,CAACN,IAAI,EACdO,MAAM,QAAQI,OAAO,EAAEC,OAAO,GAAK,CAAC;IACnCC,OAAO,CAACC,GAAG,CAAC,CAAS,UAAEH,OAAO,EAAEC,OAAO;AACzC,CAAC"}
{"version":3,"sources":["src/updateAlias.ts"],"sourcesContent":["import { Lambda } from \"@aws-sdk/client-lambda\";\n\nexport default async function updateAlias({\n  alias,\n  lambdaName,\n  region,\n  version,\n}: {\n  alias: string;\n  lambdaName: string;\n  region: string;\n  version: string;\n}): Promise<string> {\n  const lambda = new Lambda({ region });\n\n  try {\n    const { AliasArn: arn } = await lambda.getAlias({\n      FunctionName: lambdaName,\n      Name: alias,\n    });\n    if (arn) {\n      const { AliasArn: arn } = await lambda.updateAlias({\n        FunctionName: lambdaName,\n        FunctionVersion: version,\n        Name: alias,\n      });\n      if (!arn) throw new Error(\"Could not update alias\");\n      return arn;\n    }\n  } catch (error) {\n    if (!(error instanceof Error && error.name === \"ResourceNotFoundException\"))\n      throw error;\n  }\n\n  const { AliasArn: arn } = await lambda.createAlias({\n    FunctionName: lambdaName,\n    FunctionVersion: version,\n    Name: alias,\n  });\n  if (!arn) throw new Error(\"Could not create alias\");\n\n  return arn;\n}\n"],"names":["updateAlias","alias","lambdaName","region","version","lambda","AliasArn","arn","getAlias","FunctionName","Name","FunctionVersion","Error","error","name","createAlias"],"mappings":";;;;kBAE8BA,WAAW;AAFlB,GAAwB,CAAxB,aAAwB;eAEjBA,WAAW,CAAC,CAAC,CACzCC,KAAK,GACLC,UAAU,GACVC,MAAM,GACNC,OAAO,EAMT,CAAC,EAAmB,CAAC;IACnB,KAAK,CAACC,MAAM,GAAG,GAAG,CAbG,aAAwB,QAanB,CAAC;QAACF,MAAM;IAAC,CAAC;IAEpC,GAAG,CAAC,CAAC;QACH,KAAK,CAAC,CAAC,CAACG,QAAQ,EAAEC,GAAG,EAAC,CAAC,GAAG,KAAK,CAACF,MAAM,CAACG,QAAQ,CAAC,CAAC;YAC/CC,YAAY,EAAEP,UAAU;YACxBQ,IAAI,EAAET,KAAK;QACb,CAAC;QACD,EAAE,EAAEM,GAAG,EAAE,CAAC;YACR,KAAK,CAAC,CAAC,CAACD,QAAQ,EAAEC,GAAG,EAAC,CAAC,GAAG,KAAK,CAACF,MAAM,CAACL,WAAW,CAAC,CAAC;gBAClDS,YAAY,EAAEP,UAAU;gBACxBS,eAAe,EAAEP,OAAO;gBACxBM,IAAI,EAAET,KAAK;YACb,CAAC;YACD,EAAE,GAAGM,GAAG,EAAE,KAAK,CAAC,GAAG,CAACK,KAAK,CAAC,CAAwB;YAClD,MAAM,CAACL,GAAG;QACZ,CAAC;IACH,CAAC,CAAC,KAAK,EAAEM,KAAK,EAAE,CAAC;QACf,EAAE,IAAIA,KAAK,YAAYD,KAAK,IAAIC,KAAK,CAACC,IAAI,KAAK,CAA2B,6BACxE,KAAK,CAACD,KAAK;IACf,CAAC;IAED,KAAK,CAAC,CAAC,CAACP,QAAQ,EAAEC,GAAG,EAAC,CAAC,GAAG,KAAK,CAACF,MAAM,CAACU,WAAW,CAAC,CAAC;QAClDN,YAAY,EAAEP,UAAU;QACxBS,eAAe,EAAEP,OAAO;QACxBM,IAAI,EAAET,KAAK;IACb,CAAC;IACD,EAAE,GAAGM,GAAG,EAAE,KAAK,CAAC,GAAG,CAACK,KAAK,CAAC,CAAwB;IAElD,MAAM,CAACL,GAAG;AACZ,CAAC"}